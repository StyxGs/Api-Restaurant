<h2>Api</h2>

<p>Api для ресторана</p>
<p>Зависимости:</p>
<ul>
<li>У меню есть подменю, которые к ней привязаны.</li>
<li>У подменю есть блюда.</li>
</ul>
<p>Условия:</p>
<ul>
<li>Блюдо не может быть привязано напрямую к меню, минуя подменю.</li>
<li>Блюдо не может находиться в 2-х подменю одновременно.</li>
<li>Подменю не может находиться в 2-х меню одновременно.</li>
<li>Если удалить меню, должны удалиться все подменю и блюда этого меню.</li>
<li>Если удалить подменю, должны удалиться все блюда этого подменю.</li>
<li>Цены блюд выводить с округлением до 2 знаков после запятой.</li>
<li>Во время выдачи списка меню, для каждого меню добавлять кол-во подменю и блюд в этом меню.</li>
<li>Во время выдачи списка подменю, для каждого подменю добавлять кол-во блюд в этом подменю.</li>
<li>Во время запуска тестового сценария БД должна быть пуста.</li>
</ul>

<h3>Инструкция по запуску приложения:</h3>

<ol>
<li>Клонировать репозиторий: git clone https://github.com/StyxGs/Y_lab.git</li>
<li>Перейти в папку куда скопирован проект, там должен находить файл docker-compose.yml</li>
<li>Выполнить команду docker-compose up -d</li>
<li>Апи будет доступно по адресу: http://localhost:8000</li>
</ol>

<h3>Тестирование. Инструкция по запуску.</h3>
<p>Для тестов я создал отдельный yml файл.</p>
<ol>
<li>Перейти в папку куда скопирован проект, там должен находить файл docker-compose-test.yml</li>
<li>Команда для запуска тестов: docker-compose -f docker-compose-test.yml up -d</li>
<li>Для того чтобы посмотреть логи о прохождение тестов: docker-compose -f docker-compose-test.yml logs -f api_test</li>
</ol>
<p>Для тестов postman: Перед запуском приложения папка admin должна быть пуста! После добавить в неё файл с названием Menu.xlsx</p>

<h3>Админка</h3>
<p>Я реализовал админку так, что пока она есть в проекте(файл Menu.xlsx), данные которые мы добавляем через api будут затираться,
чтобы этого не происходило надо удалить или убрать файл Menu.xlsx</p>
<p>В файле Menu.xlsx уже есть данные, добавлять, удалять, обновлять данные строго по такой же структуре, что в файле!</p>

<h3>Задания со звездочкой</h3>
<ol>
<li>*Реализовать вывод количества подменю и блюд для Меню через один (сложный) ORM запрос.
<p>Можно посмотреть тут для меню: src.infrastructure.db.dao.rdb.menu функция get_list</p>
<p>Тут для подменю: src.infrastructure.db.dao.rdb.submenu функция get_list</p></li>
<li>** Реализовать тестовый сценарий «Проверка кол-ва блюд и подменю в меню» из Postman с помощью pytest.
<p>Можно посмотреть тут для меню: test.integration.api.test_case</p></li>
<li>* Описать ручки API в соответствий c OpenAPI.
<p>Можно посмотреть после запуска проекта по адресу http://localhost:8000/docs#</p></li>
<li>** Реализовать в тестах аналог Django reverse() для FastAPI.
<p>Сделал через фикстуру. Можно посмотреть её тут: test.integration.api.conftest - фикстура называется reverse</p></li>
</ol>
